{
  "version": "2.0.0",
  "tasks": [
    // =========================================================================
    // COMPOUND TASK - Run this one to start everything (Ctrl+Cmd+B / Shift+Cmd+B)
    // =========================================================================
    {
      "label": "ðŸš€ Start All Local Services",
      "dependsOn": [
        "1ï¸âƒ£ LocalStack",
        "âš¡ Start Background Services"
      ],
      "dependsOrder": "sequence",
      "problemMatcher": [],
      "group": {
        "kind": "build",
        "isDefault": true
      }
    },
    {
      "label": "âš¡ Start Background Services",
      "dependsOn": [
        "2ï¸âƒ£ Deploy Backend",
        "3ï¸âƒ£ Frontend (Vite)"
      ],
      "dependsOrder": "parallel",
      "problemMatcher": []
    },

    // =========================================================================
    // Individual services - each runs in its own terminal panel
    // =========================================================================
    {
      "label": "1ï¸âƒ£ LocalStack",
      "type": "shell",
      "command": "LOCALSTACK_CMD=\"$(command -v localstack 2>/dev/null || echo /opt/homebrew/bin/localstack)\" && echo 'â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•' && echo 'ðŸš€ Starting LocalStack (daemon mode)...' && echo 'â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•' && \"$LOCALSTACK_CMD\" start -d && echo 'â³ Waiting for LocalStack to be ready...' && \"$LOCALSTACK_CMD\" wait -t 60 && echo 'âœ… LocalStack is ready!'",
      "windows": {
        "command": "Write-Host 'â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•'; Write-Host 'ðŸš€ Starting LocalStack (daemon mode)...'; Write-Host 'â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•'; localstack start -d; Write-Host 'â³ Waiting for LocalStack to be ready...'; localstack wait -t 60; Write-Host 'âœ… LocalStack is ready!'"
      },
      "options": {
        "cwd": "${workspaceFolder}",
        "env": {
          "LOCALSTACK_AUTH_TOKEN": "${env:LOCALSTACK_AUTH_TOKEN}"
        }
      },
      "presentation": {
        "reveal": "always",
        "panel": "dedicated"
      },
      "problemMatcher": [],
      "isBackground": false
    },
    {
      "label": "2ï¸âƒ£ Deploy Backend",
      "type": "shell",
      "command": "bash ./scripts/deploy.sh",
      "windows": {
        "command": "powershell -ExecutionPolicy Bypass -File scripts/deploy.ps1"
      },
      "options": {
        "cwd": "${workspaceFolder}",
        "env": {
          "AWS_ACCESS_KEY_ID": "test",
          "AWS_SECRET_ACCESS_KEY": "test",
          "AWS_DEFAULT_REGION": "us-east-1"
        }
      },
      "presentation": {
        "reveal": "always",
        "panel": "dedicated"
      },
      "problemMatcher": [],
      "isBackground": true,
      "runOptions": {
        "instanceLimit": 1
      }
    },
    {
      "label": "3ï¸âƒ£ Frontend (Vite)",
      "type": "shell",
      "command": "echo 'â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•' && echo 'ðŸŒ Starting Frontend at http://localhost:3000' && echo 'â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•' && npm run dev",
      "options": {
        "cwd": "${workspaceFolder}/frontend"
      },
      "presentation": {
        "reveal": "always",
        "panel": "dedicated"
      },
      "problemMatcher": [],
      "isBackground": true,
      "runOptions": {
        "instanceLimit": 1
      }
    },

    // =========================================================================
    // Utility tasks
    // =========================================================================
    {
      "label": "ðŸ›‘ Stop LocalStack",
      "type": "shell",
      "command": "LOCALSTACK_CMD=\"$(command -v localstack 2>/dev/null || echo /opt/homebrew/bin/localstack)\" && \"$LOCALSTACK_CMD\" stop",
      "windows": {
        "command": "localstack stop"
      },
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      },
      "problemMatcher": []
    },
    {
      "label": "ðŸ”„ Redeploy Backend",
      "type": "shell",
      "command": "bash ./scripts/deploy.sh",
      "windows": {
        "command": "powershell -ExecutionPolicy Bypass -File scripts/deploy.ps1"
      },
      "options": {
        "cwd": "${workspaceFolder}",
        "env": {
          "AWS_ACCESS_KEY_ID": "test",
          "AWS_SECRET_ACCESS_KEY": "test",
          "AWS_DEFAULT_REGION": "us-east-1"
        }
      },
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      },
      "problemMatcher": []
    }
  ]
}
